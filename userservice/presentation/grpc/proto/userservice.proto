syntax = "proto3";

package userservice.v1;

option go_package = "userservice/presentation/grpc/pb;pb";

import "google/protobuf/timestamp.proto";
import "google/protobuf/empty.proto";

service UsersService {
  rpc AddProfile (AddProfileRequest) returns (Profile);
  rpc GetProfile (google.protobuf.Empty) returns (Profile);
  rpc UpdateProfile (UpdateProfileRequest) returns (Profile);
  rpc UploadPhoto (UploadPhotoRequest) returns (Profile);
  rpc ChangeSettings (ChangeSettingsRequest) returns (Profile);
  rpc ChangeSubscriptions (ChangeSubscriptionsRequest) returns (Profile);
}

message Profile {
  uint64 user_id = 1;
  string name = 2;
  string phone = 3;
  string photo_id = 4;
  bool notifications_enabled = 5;
  repeated string subscriptions = 6;
  google.protobuf.Timestamp updated_at = 7;
}

message AddProfileRequest {
  string name = 1;
  string phone = 2;
}

message UpdateProfileRequest {
  string name = 1;
  string phone = 2;
}

message UploadPhotoRequest {
  bytes data = 1;
  string filename = 2;
  string content_type = 3;
}

message ChangeSettingsRequest {
  bool notifications_enabled = 1;
}

message ChangeSubscriptionsRequest {
  repeated string subscriptions = 1;
}